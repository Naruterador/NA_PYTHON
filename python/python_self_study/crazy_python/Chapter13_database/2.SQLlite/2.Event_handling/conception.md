# 事务控制

> 事务是由一步或几步数据库数据库操作组成的逻辑执行单元，这一系列操作要么全部执行，要么全部放弃执行。程序和事务是两个不同的概念。一般而言，在一段程序中可能包含多个事务。


> 事务具备4种特性:原子性(Atomicity)、一致性(Consistency)、隔离性(Isolation)和持续性(Durability)。这4种特性也简称为ACID。
<pre>
    > 原子性:事务是应用中最小的执行单位，就如原子是自然界的最小颗粒，具有
            不可再分的特征一样，事务是应用中不可再分的最小逻辑执行体。
    > 一致性:事务执行的结果，必须使数据库从一种一致性状态变到另一种一致性状态。
            当数据库只包含事务成功提交的结果时，数据库处于一致性状态。如果系统运行发
            生中断，某个事务尚未完成而被迫中断，而该未完成的事务对数据库所做的修改已
            被写入数据库中，此时数据库就处于一种不正确的状态。比如银行在两个账户之间
            转账，从A账户转到B账户转入1000元，系统先减少A账户的1000元，然后再为B
            账户增加1000元。如果全部执行成功，数据处于一致性状态;如果仅执行完A账户
            金额的修改，而没有增加B账户的金额，则数据库就处于不一致性状态。因此
            一致性是通过原子性来保证的。
    > 隔离性:各个事务的执行互不干扰，任意一个事务的内部操作对其他并发的事务都是隔离的
            也就是说并发执行的事务之间不能看到对方的中间状态，它们不能相互影响。
    > 持续性:持续性也称为持久性(Persistence),指事务一旦提交，对数据所做的任何改变
            都要记录到永久存储器中，通常就是保存到物理数据库中去。
</pre>

> 当事务所包含的任意一个数据库操作执行失败之后，应该回滚(rollback)事务，使在该事务中所做的修改全部失效。事务回滚的方式有两种:显示回滚和自动回滚。
<pre>
    1.显示回滚:调用数据库连接对象的rollback
    2.自动回滚:系统错误，或者强行退出

正如前面程序所介绍的，如果程序执行了DML语句后没有执行commit()方法，则不会提交
事务，程序所做的修改不会被提交到底层数据库中。
</pre>